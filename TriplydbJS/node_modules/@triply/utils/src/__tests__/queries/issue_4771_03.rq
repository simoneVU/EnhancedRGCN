prefix table: <https://www.rijksfinancien.nl/informatieproducten/id/tabel/RBV1.34/a>
prefix tablehead: <https://www.rijksfinancien.nl/informatieproducten/id/tabelkop/RBV1.34/a/>
prefix row: <https://www.rijksfinancien.nl/informatieproducten/id/rij/RBV1.34/a/>
prefix dsd: <https://www.rijksfinancien.nl/informatieproducten/id/dsd/1.34/a>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX sdo: <https://schema.org/>
PREFIX ffact: <https://www.rijksfinancien.nl/financieelfeit/>
PREFIX fbud: <https://www.rijksfinancien.nl/rijksbegroting/>
PREFIX fstr: <https://www.rijksfinancien.nl/rijksbegrotingsstructuur/>
PREFIX qb: <http://purl.org/linked-data/cube#>
PREFIX rij: <https://www.rijksfinancien.nl/informatieproducten/id/rij/>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX pres: <https://www.rijksfinancien.nl/informatieproducten/def/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix ui: <http://www.w3.org/ns/ui#>
prefix ns: <http://ns.nature.com/terms/>
prefix time: <http://www.w3.org/2006/time#/>
SELECT * WHERE {
  BIND(?UserRomanNumeral as ?romanNumeral)
  # TABLE SPECIFIC INFO
  ?chapter fstr:hasBudgetStructureElementName ?ministry ;
           fstr:hasBudgetChapterRomanNumber ?romanNumeral ;
           fstr:hasBudgetStructureChildElement ?article .
  ?article fstr:hasBudgetStructureElementName "Algemeen" .
  ?hasBudgetMemorandumPeriod time:hasDateTimeDescription/time:year ?year .
  ?dataset fbud:hasBudgetMemorandumPeriod ?hasBudgetMemorandumPeriod;
           fbud:referencesBudgetStructureElement ?chapter ;
           qb:structure dsd:.
  # Tabel styling
  table: ui:style ?style .
  table: pres:template ?widget ;
         dct:hasPart
      [ ns:number 7;
        pres:template ?rowEmpty ] .
  # -------------------------------------- Start of column headers -----------------------------------------
  tablehead:1 pres:beginRow ?beginRow ;
              pres:beginText ?beginText ;
              pres:endText ?endText ;
              pres:endRow ?endRow .
  BIND(concat(str(?beginText),year(?year)-1,str(?endText)) as ?tMinus2)
  BIND(concat(str(?beginText),?year,str(?endText)) as ?tMinus1)
  BIND(concat(str(?beginText),year(?year)+1,str(?endText)) as ?t)
  BIND(concat(str(?beginText),year(?year)+2,str(?endText)) as ?t1)
  BIND(concat(str(?beginText),year(?year)+3,str(?endText)) as ?t2)
  BIND(concat(str(?beginText),year(?year)+4,str(?endText)) as ?t3)
  BIND(concat(str(?beginText),year(?year)+5,str(?endText)) as ?t4)
  BIND(concat(str(?beginRow), ?tMinus2, ?tMinus1, ?t, ?t1, ?t2, ?t3, ?t4, str(?endRow)) as ?row1)
  # -------------------------------------- End of column headers -----------------------------------------
  # -------------------------------------- Start of calculation of commitment row -----------------------------------------
  {
    {
      SELECT
      ?dataset ?romanNumeral ?article ?chapter
      (replace(str(SUM(coalesce(?commitmentTminus2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesTminus2)
      (replace(str(SUM(coalesce(?commitmentTminus1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesTminus1)
      (replace(str(SUM(coalesce(?commitmentT,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesT)
      (replace(str(SUM(coalesce(?commitmentT1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesT1)
      (replace(str(SUM(coalesce(?commitmentT2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesT2)
      (replace(str(SUM(coalesce(?commitmentT3,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesT3)
      (replace(str(SUM(coalesce(?commitmentT4,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?CommitmentValuesT4)
      WHERE {
        ?chapter fstr:hasBudgetChapterRomanNumber ?romanNumeral .
        ?observation qb:dataSet ?dataset ;
                     fbud:referencesBudgetStructureElement ?article ;
                     fbud:hasTransactionalDirection fbud:Outgoing ;
                     fbud:hasTransactionalRealisationPhase fbud:Commitment ;
                     fbud:hasNationalBudgetPeriod/time:hasDateTimeDescription/time:year ?bpyear .
        ?hasBudgetMemorandumPeriod time:hasDateTimeDescription/time:year ?bmyearStr .
        {
          ?observation ffact:hasMonetaryAmount/sdo:value ?commitmentTminus2 .
          FILTER(year(?bmyearStr) = year(?bpyear)+1)
        } UNION
        {
          ?observation ffact:hasMonetaryAmount/sdo:value ?commitmentTminus1 .
          FILTER(year(?bmyearStr) = year(?bpyear))
        } UNION
        {
          ?observation ffact:hasMonetaryAmount/sdo:value ?commitmentT .
          FILTER(year(?bmyearStr) = year(?bpyear)-1)
        } UNION
        {
          ?observation  ffact:hasMonetaryAmount/sdo:value ?commitmentT1 .
          FILTER(year(?bmyearStr) = year(?bpyear)-2)
        } UNION
        {
          ?observation ffact:hasMonetaryAmount/sdo:value ?commitmentT2 .
          FILTER(year(?bmyearStr) = year(?bpyear)-3)
        } UNION
        {
          ?observation ffact:hasMonetaryAmount/sdo:value ?commitmentT3 .
          FILTER(year(?bmyearStr) = year(?bpyear)-4)
        } UNION
        {
          ?observation ffact:hasMonetaryAmount/sdo:value ?commitmentT4 .
          FILTER(year(?bmyearStr) = year(?bpyear)-5)
        }
      }
    }
    row:2 pres:beginRow2 ?beginRow2 ;
          pres:beginText2 ?beginText2 ;
          pres:endText2 ?endText2 ;
          pres:endRow2 ?endRow2 .
    BIND(concat(str(?beginText2),?CommitmentValuesTminus2,str(?endText2)) as ?CommitmentValuesTminus2g)
    BIND(concat(str(?beginText2),?CommitmentValuesTminus1,str(?endText2)) as ?CommitmentValuesTminus1g)
    BIND(concat(str(?beginText2),?CommitmentValuesT,str(?endText2)) as ?CommitmentValuesTg)
    BIND(concat(str(?beginText2),?CommitmentValuesT1,str(?endText2)) as ?CommitmentValuesT1g)
    BIND(concat(str(?beginText2),?CommitmentValuesT2,str(?endText2)) as ?CommitmentValuesT2g)
    BIND(concat(str(?beginText2),?CommitmentValuesT3,str(?endText2)) as ?CommitmentValuesT3g)
    BIND(concat(str(?beginText2),?CommitmentValuesT4,str(?endText2)) as ?CommitmentValuesT4g)
    BIND(concat(str(?beginRow2), ?CommitmentValuesTminus2g,
        ?CommitmentValuesTminus1g, ?CommitmentValuesTg,
        ?CommitmentValuesT1g, ?CommitmentValuesT2g,
        ?CommitmentValuesT3g, ?CommitmentValuesT4g,
        str(?endRow2))as ?row2)
  }
  # -------------------------------------- End of calculation of commitment row -----------------------------------------
  # -------------------------------------- Start of calculation of outgoing row -----------------------------------------
  {
    SELECT
    ?dataset ?romanNumeral ?article ?chapter
    (replace(str(SUM(coalesce(?OutgoingTminus2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTminus2)
    (replace(str(SUM(coalesce(?OutgoingTminus1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTminus1)
    (replace(str(SUM(coalesce(?OutgoingT,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT)
    (replace(str(SUM(coalesce(?OutgoingT1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT1)
    (replace(str(SUM(coalesce(?OutgoingT2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT2)
    (replace(str(SUM(coalesce(?OutgoingT3,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT3)
    (replace(str(SUM(coalesce(?OutgoingT4,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT4)
    WHERE {
      ?chapter fstr:hasBudgetChapterRomanNumber ?romanNumeral .
      ?observation qb:dataSet ?dataset ;
                   fbud:referencesBudgetStructureElement ?article ;
                   fbud:hasTransactionalDirection fbud:Outgoing ;
                   fbud:hasTransactionalRealisationPhase fbud:CashFlow ;
                   fbud:hasNationalBudgetPeriod/time:hasDateTimeDescription/time:year ?bpyear .
      ?hasBudgetMemorandumPeriod time:hasDateTimeDescription/time:year ?bmyearStr .
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingTminus2 .
        FILTER(year(?bmyearStr) = year(?bpyear)+1)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingTminus1 .
        FILTER(year(?bmyearStr) = year(?bpyear))
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT .
        FILTER(year(?bmyearStr) = year(?bpyear)-1)
      } UNION
      {
        ?observation  ffact:hasMonetaryAmount/sdo:value ?OutgoingT1 .
        FILTER(year(?bmyearStr) = year(?bpyear)-2)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT2 .
        FILTER(year(?bmyearStr) = year(?bpyear)-3)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT3 .
        FILTER(year(?bmyearStr) = year(?bpyear)-4)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT4 .
        FILTER(year(?bmyearStr) = year(?bpyear)-5)
      }
    }
  }
  row:3 pres:beginRow3 ?beginRow3 ;
        pres:beginText3 ?beginText3 ;
        pres:endText3 ?endText3 ;
        pres:endRow3 ?endRow3 .
  BIND(concat(str(?beginText3),?OutgoingValuesTminus2,str(?endText3)) as ?OutgoingValuesTminus2g)
  BIND(concat(str(?beginText3),?OutgoingValuesTminus1,str(?endText3)) as ?OutgoingValuesTminus1g)
  BIND(concat(str(?beginText3),?OutgoingValuesT,str(?endText3)) as ?OutgoingValuesTg)
  BIND(concat(str(?beginText3),?OutgoingValuesT1,str(?endText3)) as ?OutgoingValuesT1g)
  BIND(concat(str(?beginText3),?OutgoingValuesT2,str(?endText3)) as ?OutgoingValuesT2g)
  BIND(concat(str(?beginText3),?OutgoingValuesT3,str(?endText3)) as ?OutgoingValuesT3g)
  BIND(concat(str(?beginText3),?OutgoingValuesT4,str(?endText3)) as ?OutgoingValuesT4g)
  BIND(concat(str(?beginRow3), ?OutgoingValuesTminus2g,
      ?OutgoingValuesTminus1g, ?OutgoingValuesTg,
      ?OutgoingValuesT1g, ?OutgoingValuesT2g,
      ?OutgoingValuesT3g, ?OutgoingValuesT4g,
      str(?endRow3))as ?row3)
  # -------------------------------------- End of calculation of outgoing row -----------------------------------------
  # -------------------------------------- Start of incoming row ---------------------------------------
  {
    SELECT
    ?dataset ?romanNumeral ?article ?chapter
    (replace(str(SUM(coalesce(?IncomingTminus2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesTminus2)
    (replace(str(SUM(coalesce(?IncomingTminus1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesTminus1)
    (replace(str(SUM(coalesce(?IncomingT,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesT)
    (replace(str(SUM(coalesce(?IncomingT1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesT1)
    (replace(str(SUM(coalesce(?IncomingT2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesT2)
    (replace(str(SUM(coalesce(?IncomingT3,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesT3)
    (replace(str(SUM(coalesce(?IncomingT4,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?IncomingValuesT4)
    WHERE {
      ?chapter fstr:hasBudgetChapterRomanNumber ?romanNumeral .
      ?observation qb:dataSet ?dataset ;
                   fbud:referencesBudgetStructureElement ?article ;
                   fbud:hasTransactionalDirection fbud:Incoming ;
                   fbud:hasTransactionalRealisationPhase fbud:CashFlow ;
                   fbud:hasNationalBudgetPeriod/time:hasDateTimeDescription/time:year ?bpyear .
      ?hasBudgetMemorandumPeriod time:hasDateTimeDescription/time:year ?bmyearStr .
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?IncomingTminus2 .
        FILTER(year(?bmyearStr) = year(?bpyear)+1)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?IncomingTminus1 .
        FILTER(year(?bmyearStr) = year(?bpyear))
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?IncomingT .
        FILTER(year(?bmyearStr) = year(?bpyear)-1)
      } UNION
      {
        ?observation  ffact:hasMonetaryAmount/sdo:value ?IncomingT1 .
        FILTER(year(?bmyearStr) = year(?bpyear)-2)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?IncomingT2 .
        FILTER(year(?bmyearStr) = year(?bpyear)-3)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?IncomingT3 .
        FILTER(year(?bmyearStr) = year(?bpyear)-4)
      } UNION
      {
        ?observation ffact:hasMonetaryAmount/sdo:value ?IncomingT4 .
        FILTER(year(?bmyearStr) = year(?bpyear)-5)
      }
    }
  }
  row:6 pres:beginRow6 ?beginRow6 ;
        pres:beginText6 ?beginText6 ;
        pres:endText6 ?endText6 ;
        pres:endRow6 ?endRow6 .
  BIND(concat(str(?beginText6),?IncomingValuesTminus2,str(?endText6)) as ?IncomingValuesTminus2g)
  BIND(concat(str(?beginText6),?IncomingValuesTminus1,str(?endText6)) as ?IncomingValuesTminus1g)
  BIND(concat(str(?beginText6),?IncomingValuesT,str(?endText6)) as ?IncomingValuesTg)
  BIND(concat(str(?beginText6),?IncomingValuesT1,str(?endText6)) as ?IncomingValuesT1g)
  BIND(concat(str(?beginText6),?IncomingValuesT2,str(?endText6)) as ?IncomingValuesT2g)
  BIND(concat(str(?beginText6),?IncomingValuesT3,str(?endText6)) as ?IncomingValuesT3g)
  BIND(concat(str(?beginText6),?IncomingValuesT4,str(?endText6)) as ?IncomingValuesT4g)
  BIND(concat(str(?beginRow6), ?IncomingValuesTminus2g,
      ?IncomingValuesTminus1g, ?IncomingValuesTg,
      ?IncomingValuesT1g, ?IncomingValuesT2g,
      ?IncomingValuesT3g, ?IncomingValuesT4g,
      str(?endRow6))as ?row6)
  # -------------------------------------- End of incoming row ---------------------------------------
  # ----------------------------- Start of row 4 and 5 articleSubItems and ArticleItems -------------------------------
  {
    SELECT ?dataset ?romanNumeral ?article ?chapter (GROUP_CONCAT(?rowAlmost4;
        separator="") as ?row4)  WHERE {
      {
        #        SELECT
        #        ?row5
        #        WHERE {
        #
        SELECT * WHERE {
          {
            SELECT
            ?dataset ?romanNumeral ?article ?chapter
            ?ArticleItemName ?ArticleItemNumber
            (replace(str(SUM(coalesce(?OutgoingTminus2Sum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTminus2Sum)
            (replace(str(SUM(coalesce(?OutgoingTminus1Sum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTminus1Sum)
            (replace(str(SUM(coalesce(?OutgoingTSum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTSum)
            (replace(str(SUM(coalesce(?OutgoingT1Sum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT1Sum)
            (replace(str(SUM(coalesce(?OutgoingT2Sum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT2Sum)
            (replace(str(SUM(coalesce(?OutgoingT3Sum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT3Sum)
            (replace(str(SUM(coalesce(?OutgoingT4Sum,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT4Sum)
            (GROUP_CONCAT(?row;
                separator="") as ?row5)  WHERE {
              {
                SELECT *
                WHERE {
                  ## DATA
                  {
                    SELECT
                    ?dataset ?romanNumeral ?article ?chapter
                    (SUM(?OutgoingTminus2) as ?OutgoingTminus2Sum)
                    (SUM(?OutgoingTminus1) as ?OutgoingTminus1Sum)
                    (SUM(?OutgoingT) as ?OutgoingTSum)
                    (SUM(?OutgoingT1) as ?OutgoingT1Sum)
                    (SUM(?OutgoingT2) as ?OutgoingT2Sum)
                    (SUM(?OutgoingT3) as ?OutgoingT3Sum)
                    (SUM(?OutgoingT4) as ?OutgoingT4Sum)
                    ?ArticleSubItemName
                    ?ArticleItemName ?ArticleItemNumber
                    (replace(str(SUM(coalesce(?OutgoingTminus2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTminus2)
                    (replace(str(SUM(coalesce(?OutgoingTminus1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesTminus1)
                    (replace(str(SUM(coalesce(?OutgoingT,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT)
                    (replace(str(SUM(coalesce(?OutgoingT1,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT1)
                    (replace(str(SUM(coalesce(?OutgoingT2,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT2)
                    (replace(str(SUM(coalesce(?OutgoingT3,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT3)
                    (replace(str(SUM(coalesce(?OutgoingT4,0))),'[0-9](?=(?:[0-9]{3})+(?![0-9]))','$0.') as ?OutgoingValuesT4)
                    WHERE {
                      ?chapter fstr:hasBudgetChapterRomanNumber ?romanNumeral .
                      ?observation qb:dataSet ?dataset ;
                                   fbud:referencesBudgetStructureElement ?article, ?ArticleItem, ?articleSubItem .
                      ?ArticleItem fstr:hasBudgetStructureElementName ?ArticleItemName ;
                                   fstr:hasBudgetStructureElementNumber ?ArticleItemNumber ;
                                   rdf:type fstr:BudgetArticleItem ;
                                   fstr:hasBudgetStructureChildElement ?articleSubItem .
                      ?articleSubItem fstr:hasBudgetStructureElementName ?ArticleSubItemName ;
                                      fstr:hasBudgetStructureElementNumber ?ArticleSubItemNumber ;
                                      rdf:type fstr:BudgetArticleSubItem .
                      ?observation fbud:hasTransactionalDirection fbud:Outgoing ;
                                   fbud:hasTransactionalRealisationPhase fbud:CashFlow ;
                                   fbud:hasNationalBudgetPeriod/time:hasDateTimeDescription/time:year ?bpyear .
                      ?hasBudgetMemorandumPeriod time:hasDateTimeDescription/time:year ?bmyearStr .
                      {
                        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingTminus2 .
                        FILTER(year(?bmyearStr) = year(?bpyear)+1)
                      } UNION
                      {
                        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingTminus1 .
                        FILTER(year(?bmyearStr) = year(?bpyear))
                      } UNION
                      {
                        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT .
                        FILTER(year(?bmyearStr) = year(?bpyear)-1)
                      } UNION {
                        ?observation  ffact:hasMonetaryAmount/sdo:value ?OutgoingT1 .
                        FILTER(year(?bmyearStr) = year(?bpyear)-2)
                      } UNION {
                        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT2 .
                        FILTER(year(?bmyearStr) = year(?bpyear)-3)
                      } UNION {
                        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT3 .
                        FILTER(year(?bmyearStr) = year(?bpyear)-4)
                      } UNION {
                        ?observation ffact:hasMonetaryAmount/sdo:value ?OutgoingT4 .
                        FILTER(year(?bmyearStr) = year(?bpyear)-5)
                      }
                    }
                  }
                  ## HTML
                  row:5 pres:beginRow5 ?beginRow5 ;
                        pres:beginText5 ?beginText5 ;
                        pres:endText5 ?endText5 ;
                        pres:endRow5 ?endRow5 .
                  BIND(concat(str(?beginText5),?ArticleSubItemName,str(?endText5)) as ?ArticleSubItemNameH)
                  BIND(concat(str(?beginText5),?OutgoingValuesTminus2,str(?endText5)) as ?OutgoingValuesTminus2Item)
                  BIND(concat(str(?beginText5),?OutgoingValuesTminus1,str(?endText5)) as ?OutgoingValuesTminus1Item)
                  BIND(concat(str(?beginText5),?OutgoingValuesT,str(?endText5)) as ?OutgoingValuesTItem)
                  BIND(concat(str(?beginText5),?OutgoingValuesT1,str(?endText5)) as ?OutgoingValuesT1Item)
                  BIND(concat(str(?beginText5),?OutgoingValuesT2,str(?endText5)) as ?OutgoingValuesT2Item)
                  BIND(concat(str(?beginText5),?OutgoingValuesT3,str(?endText5)) as ?OutgoingValuesT3Item)
                  BIND(concat(str(?beginText5),?OutgoingValuesT4,str(?endText5)) as ?OutgoingValuesT4Item)
                  BIND(concat(str(?beginRow5), ?ArticleSubItemNameH , ?OutgoingValuesTminus2Item,
                      ?OutgoingValuesTminus1Item, ?OutgoingValuesTItem, ?OutgoingValuesT1Item, ?OutgoingValuesT2Item,
                      ?OutgoingValuesT3Item, ?OutgoingValuesT4Item,str(?endRow5)) as ?row)
                }
                ORDER BY xsd:integer(?ArticleSubItemNumber)
              }
            } GROUP BY ?dataset ?romanNumeral ?article ?chapter ?ArticleItemName ?ArticleItemNumber
          }
          ## HTML
          row:4 pres:beginRow4 ?beginRow4 ;
                pres:beginText4 ?beginText4 ;
                pres:endText4 ?endText4 ;
                pres:endRow4 ?endRow4 .
          table: pres:template ?widget ;
                 dct:hasPart
              [ ns:number 7;
                pres:template ?rowEmpty ] .
          BIND(concat(str(?beginText4),?ArticleItemName,str(?endText4)) as ?DescriptionSub)
          BIND(concat(str(?beginText4),?OutgoingValuesTminus2Sum,str(?endText4)) as ?OutgoingValuesTminus2Item)
          BIND(concat(str(?beginText4),?OutgoingValuesTminus1Sum,str(?endText4)) as ?OutgoingValuesTminus1Item)
          BIND(concat(str(?beginText4),?OutgoingValuesTSum,str(?endText4)) as ?OutgoingValuesTItem)
          BIND(concat(str(?beginText4),?OutgoingValuesT1Sum,str(?endText4)) as ?OutgoingValuesT1Item)
          BIND(concat(str(?beginText4),?OutgoingValuesT2Sum,str(?endText4)) as ?OutgoingValuesT2Item)
          BIND(concat(str(?beginText4),?OutgoingValuesT3Sum,str(?endText4)) as ?OutgoingValuesT3Item)
          BIND(concat(str(?beginText4),?OutgoingValuesT4Sum,str(?endText4)) as ?OutgoingValuesT4Item)
          BIND(concat(str(?beginRow4), ?DescriptionSub , ?OutgoingValuesTminus2Item,
              ?OutgoingValuesTminus1Item, ?OutgoingValuesTItem, ?OutgoingValuesT1Item, ?OutgoingValuesT2Item,
              ?OutgoingValuesT3Item, ?OutgoingValuesT4Item,str(?endRow4), ?row5, ?rowEmpty) as ?rowAlmost4)
        } ORDER BY xsd:integer(?ArticleItemNumber)
      }
    }
  }
  #----------------------------- End of row 4 and 5 articleSubItems and ArticleItems -------------------------------
}
limit 1
