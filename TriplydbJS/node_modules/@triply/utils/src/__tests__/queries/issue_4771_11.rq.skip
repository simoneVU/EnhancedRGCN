PREFIX cbs: <https://data.labs.kadaster.nl/cbs/wbk/vocab/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix bag: <http://bag.basisregistraties.overheid.nl/def/bag#>
prefix geo: <http://www.opengis.net/ont/geosparql#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
select
?postcode ?straat ?huisnummer ?huisnummertoevoeging ?huisletter $buurt ?woonplaats ?bouwjaar ?oppervlakte ?status ?punt ?vorm
{
  {
    service <https://api.labs.kadaster.nl/datasets/cbs/wbk/services/wbk/sparql> {
      select ?buurtID $buurt where {
        ?buurtID rdf:type cbs:Buurt;
                 rdfs:label $buurt.
      } limit 1
    }
  }
  ?nummeraanduiding
    bag:bijbehorendeOpenbareRuimte ?openbareRuimte;
    bag:postcode ?postcode;
  	bag:huisnummer ?huisnummer.
  ?openbareRuimte
    bag:bijbehorendeWoonplaats/bag:naamWoonplaats ?woonplaats;
    bag:naamOpenbareRuimte ?straat.
  ?verblijfsobject a [rdfs:subClassOf bag:Verblijfsobject;
                      rdfs:label ?label ];
      bag:hoofdadres ?nummeraanduiding;
      bag:oppervlakte ?oppervlakte;
      bag:status/rdfs:label ?status;
      geo:hasGeometry/geo:asWKT ?punt;
      bag:pandrelatering [
      geo:sfWithin ?buurtID;
      geo:hasGeometry/geo:asWKT ?vorm;
      bag:oorspronkelijkBouwjaar ?bouwjaar].
  OPTIONAL{
    ?nummeraanduiding bag:huisletter ?huisletter.
  }
  OPTIONAL{
    ?nummeraanduiding bag:huisnummertoevoeging ?huisnummertoevoeging.
  }
}