"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = require("lodash");
async function promiseQueue(getters, opts) {
    const stack = [...getters];
    const result = [];
    async function getFromStack() {
        const getter = stack.shift();
        if (getter === undefined)
            return;
        result.push(await getter());
        await getFromStack();
    }
    await Promise.all(lodash_1.range(opts.concurrent).map(() => getFromStack()));
    return result;
}
exports.default = promiseQueue;
//# sourceMappingURL=promiseQueue.js.map