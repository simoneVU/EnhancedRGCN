"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const RequestHandler_1 = require("./RequestHandler");
const Error_1 = require("./utils/Error");
class Story {
    constructor(app, info, owner) {
        this._app = app;
        this._info = info;
        this._owner = owner;
    }
    async _getPath() {
        const ownerName = await this._owner.getName();
        return "/stories/" + ownerName + "/" + this._info.name;
    }
    async _getStoryNameWithOwner() {
        const ownerName = await this._owner.getName();
        return `${ownerName}/${this._info.name}`;
    }
    async getInfo(refresh = false) {
        if (!refresh && this._info)
            return this._info;
        this._info = await RequestHandler_1._get({
            errorWithCleanerStack: Error_1.getErr(`Failed to get information of story ${await this._getStoryNameWithOwner()}.`),
            app: this._app,
            path: await this._getPath(),
        });
        return this._info;
    }
}
exports.default = Story;
//# sourceMappingURL=Story.js.map